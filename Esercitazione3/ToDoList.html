<!DOCTYPE html>
<html lang="it">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List</title>
</head>
<body>
    <div class="container bg-dark pt-1 pb-1">
        <h1 class="h2 text-light" >ToDo List</h1>
        
    </div>
    <div class="container">
        <form>
            <div class="input-group mb-2 mt-2">
                    <input type="text" id="task_txt" name="task_txt" class="form-control" placeholder="Aggiungi un task ...">
                    <button id="add_btn" type="button" class="btn btn-primary btn-outline-secondary text-white">Add</button>
            </div>
        </form>
        <ul id="tasks_list_html" class="list-group">
            
           
            
        </ul>
    </div>
    <script>
        miaVariabile = new Array();
        var addBtn;
        var taskTxt;
        var taskListHTML;
        var tasksList = [];
        // dichiara le variabili
        window.addEventListener("load", init);                      
        // al caricamento della pagina chiama la funzione init
        function init(){
            addBtn = document.querySelector("#add_btn");
            taskTxt = document.querySelector("#task_txt");
            taskListHTML = document.querySelector("#tasks_list_html");
            // aggancia alle variabili gli oggetti html 
            addBtn.addEventListener("click", addTask);
            // si mette in ascolto in attesa di un evento click sul bottone
            // quando avviene il click chiama addtask
        }




        function addTask(){
            tasksList.push(taskTxt.value);
            // inserisce nell'array tasklist il valore scritto nell'input
            // chiama le 2 funzioni sotto
            var user = document.getElementById("task_txt").value;
            localStorage.setItem('task_txt', user);
            buildList();
            clearForms();
        }

        function buildList(){
            var list = "";
            // pulisce la stringa
            for(var i=0; i < tasksList.length; i++){
                // fa il ciclo sull'array ottenuto sopra
                list +="<li class='list-group-item d-flex justify-content-between align-items-center'>" + tasksList[i] + "<button class='badge rounded-pill bg-danger'>x</button>" + "</li>";
            }
            // inserisce l'html nella pagina
            taskListHTML.innerHTML = list;
            clearForms();       // pulisce ogni volta
            console.log(list, taskTxt);
        }

        function clearForms(){
            taskTxt.value = ''; // pulisce al caricamento
        }

            

            </script>

    
</body>
</html>